#!/usr/bin/env bash
set -Eeuo pipefail

# sometimes one makes commits to a repo as the wrong author
# this corrects the author of the last commit while maintaining
#   the existing commit timestamps
#
# to correct multiple commits:
# 1. set the correct author for the repo
# 2. do an interactive rebase as far back as needed
# 3. mark relevant commits 'edit' (e)
# 4. run 'git fix-author && git rebase --continue' until the rebase is done

export GIT_AUTHOR_DATE="$(git log -n1 --format=%aD)"
export GIT_COMMITTER_DATE="$(git log -n1 --format=%cD)"
git commit --amend --reset-author --no-edit
